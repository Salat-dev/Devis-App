<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard - Devis App</title>
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --orange: #F97316;
      --orange-dark: #EA6C0A;
      --orange-light: #FEF3E7;
      --gray-50: #F9FAFB;
      --gray-100: #F3F4F6;
      --gray-200: #E5E7EB;
      --gray-300: #D1D5DB;
      --gray-400: #9CA3AF;
      --gray-500: #6B7280;
      --gray-600: #4B5563;
      --gray-700: #374151;
      --gray-800: #1F2937;
      --gray-900: #111827;
      --green: #10B981;
      --green-light: #D1FAE5;
      --blue: #3B82F6;
      --blue-light: #EFF6FF;
      --purple: #8B5CF6;
      --purple-light: #F5F3FF;
      --red: #EF4444;
      --white: #FFFFFF;
    }

    body {
      font-family: 'DM Sans', sans-serif;
      background: var(--gray-100);
      min-height: 100vh;
      display: flex;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SIDEBAR DESKTOP
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .sidebar {
      width: 260px;
      min-width: 260px;
      background: var(--gray-900);
      display: flex;
      flex-direction: column;
      height: 100vh;
      position: sticky;
      top: 0;
      z-index: 20;
      transition: transform 0.32s cubic-bezier(.4,0,.2,1);
    }

    .sidebar-logo {
      padding: 24px 20px;
      border-bottom: 1px solid rgba(255,255,255,0.07);
      display: flex; align-items: center; gap: 10px;
    }
    .sidebar-logo-icon {
      width: 36px; height: 36px;
      background: var(--orange); border-radius: 10px;
      display: flex; align-items: center; justify-content: center;
      flex-shrink: 0;
    }
    .sidebar-logo span {
      font-family: 'Syne', sans-serif;
      font-size: 18px; font-weight: 800; color: white;
    }
    .sidebar-close-btn {
      display: none;
      margin-left: auto;
      background: none; border: none;
      color: rgba(255,255,255,0.45);
      cursor: pointer; padding: 4px;
      border-radius: 7px; transition: all .2s;
      flex-shrink: 0;
    }
    .sidebar-close-btn:hover { background: rgba(255,255,255,0.1); color: white; }

    .sidebar-nav {
      flex: 1; padding: 16px 12px;
      display: flex; flex-direction: column; gap: 4px;
      overflow-y: auto;
    }
    .nav-section-label {
      font-size: 10px; font-weight: 700;
      letter-spacing: .1em; text-transform: uppercase;
      color: rgba(255,255,255,0.3);
      padding: 12px 12px 6px;
    }
    .nav-link {
      display: flex; align-items: center; gap: 10px;
      padding: 10px 12px; border-radius: 10px;
      color: rgba(255,255,255,0.55);
      text-decoration: none; font-size: 14px; font-weight: 500;
      transition: all .2s;
      cursor: pointer; border: none; background: none;
      width: 100%; text-align: left;
    }
    .nav-link:hover { background: rgba(255,255,255,0.07); color: rgba(255,255,255,0.9); }
    .nav-link.active { background: rgba(249,115,22,0.15); color: var(--orange); }
    .nav-link svg { flex-shrink: 0; opacity: .8; }
    .nav-link.active svg { opacity: 1; }

    .sidebar-footer {
      padding: 16px 12px;
      border-top: 1px solid rgba(255,255,255,0.07);
    }
    .user-card {
      display: flex; align-items: center; gap: 10px;
      padding: 10px 12px; border-radius: 10px;
      margin-bottom: 8px;
      background: rgba(255,255,255,0.05);
    }
    .user-avatar {
      width: 34px; height: 34px; border-radius: 50%;
      background: var(--orange);
      display: flex; align-items: center; justify-content: center;
      font-family: 'Syne', sans-serif;
      font-size: 13px; font-weight: 700; color: white; flex-shrink: 0;
    }
    .user-info { overflow: hidden; }
    .user-name {
      font-size: 13px; font-weight: 600; color: white;
      white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
    }
    .user-role { font-size: 11px; color: rgba(255,255,255,0.4); }
    .btn-logout {
      width: 100%;
      display: flex; align-items: center; justify-content: center; gap: 8px;
      padding: 9px; border-radius: 10px;
      background: rgba(239,68,68,0.1); color: #F87171;
      font-family: 'DM Sans', sans-serif;
      font-size: 13px; font-weight: 600;
      border: 1px solid rgba(239,68,68,0.2);
      cursor: pointer; transition: all .2s;
    }
    .btn-logout:hover { background: rgba(239,68,68,0.2); color: #FCA5A5; }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       OVERLAY (mobile)
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .sidebar-overlay {
      display: none;
      position: fixed; inset: 0;
      background: rgba(0,0,0,0);
      z-index: 19;
      transition: background .32s ease;
      pointer-events: none;
    }
    .sidebar-overlay.active {
      pointer-events: all;
      background: rgba(0,0,0,0.52);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       TOPBAR (mobile only)
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .topbar {
      display: none;
      position: sticky; top: 0; z-index: 18;
      background: var(--gray-900);
      height: 58px; padding: 0 16px;
      align-items: center; justify-content: space-between;
      box-shadow: 0 2px 16px rgba(0,0,0,0.18);
      flex-shrink: 0;
    }
    .topbar-brand {
      display: flex; align-items: center; gap: 10px;
    }
    .topbar-brand-icon {
      width: 32px; height: 32px;
      background: var(--orange); border-radius: 8px;
      display: flex; align-items: center; justify-content: center;
    }
    .topbar-brand span {
      font-family: 'Syne', sans-serif;
      font-size: 16px; font-weight: 800; color: white;
    }
    .topbar-right { display: flex; align-items: center; gap: 8px; }
    .topbar-avatar {
      width: 32px; height: 32px; border-radius: 50%;
      background: var(--orange);
      display: flex; align-items: center; justify-content: center;
      font-family: 'Syne', sans-serif;
      font-size: 12px; font-weight: 700; color: white;
    }

    /* Hamburger */
    .hamburger {
      background: none; border: none;
      color: white; cursor: pointer;
      width: 40px; height: 40px;
      border-radius: 10px;
      display: flex; align-items: center; justify-content: center;
      transition: background .2s;
    }
    .hamburger:hover { background: rgba(255,255,255,0.1); }
    .ham-lines { display: flex; flex-direction: column; gap: 5px; }
    .ham-lines span {
      display: block; width: 22px; height: 2px;
      background: white; border-radius: 2px;
      transition: transform .3s ease, opacity .3s ease;
      transform-origin: center;
    }
    .hamburger.open .ham-lines span:nth-child(1) { transform: translateY(7px) rotate(45deg); }
    .hamburger.open .ham-lines span:nth-child(2) { opacity: 0; transform: scaleX(0); }
    .hamburger.open .ham-lines span:nth-child(3) { transform: translateY(-7px) rotate(-45deg); }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       MAIN CONTENT
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .main {
      flex: 1; overflow-y: auto;
      padding: 32px 36px;
      min-width: 0;
    }

    .page-header {
      display: flex; align-items: flex-start; justify-content: space-between;
      margin-bottom: 32px; gap: 16px;
    }
    .page-title {
      font-family: 'Syne', sans-serif;
      font-size: 28px; font-weight: 800;
      color: var(--gray-800); margin-bottom: 4px;
    }
    .page-subtitle { font-size: 14px; color: var(--gray-400); }
    .page-subtitle strong { color: var(--orange); font-weight: 700; }

    .header-badge {
      display: inline-flex; align-items: center; gap: 6px;
      background: var(--orange-light); color: var(--orange);
      font-family: 'Syne', sans-serif;
      font-size: 11px; font-weight: 700;
      letter-spacing: .08em; text-transform: uppercase;
      padding: 6px 14px; border-radius: 100px;
      white-space: nowrap; flex-shrink: 0;
    }

    /* Stats */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px; margin-bottom: 32px;
    }
    .stat-card {
      background: var(--white);
      border-radius: 16px; padding: 24px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.04), 0 4px 16px rgba(0,0,0,0.04);
      display: flex; flex-direction: column; gap: 12px;
      animation: slideUp .4s ease both;
    }
    .stat-card:nth-child(2) { animation-delay: .08s; }
    .stat-card:nth-child(3) { animation-delay: .16s; }
    @keyframes slideUp {
      from { opacity: 0; transform: translateY(16px); }
      to   { opacity: 1; transform: translateY(0); }
    }
    .stat-header { display: flex; align-items: center; justify-content: space-between; }
    .stat-label { font-size: 13px; font-weight: 600; color: var(--gray-500); }
    .stat-icon {
      width: 38px; height: 38px; border-radius: 10px;
      display: flex; align-items: center; justify-content: center; flex-shrink: 0;
    }
    .stat-icon.orange { background: var(--orange-light); color: var(--orange); }
    .stat-icon.green  { background: var(--green-light);  color: var(--green); }
    .stat-icon.blue   { background: var(--blue-light);   color: var(--blue); }
    .stat-value {
      font-family: 'Syne', sans-serif;
      font-size: 32px; font-weight: 800;
      color: var(--gray-800); line-height: 1;
    }
    .stat-footer {
      font-size: 12px; color: var(--gray-400);
      padding-top: 8px; border-top: 1px solid var(--gray-100);
    }

    /* Actions rapides â€” mobile seulement */
    .quick-actions {
      display: none;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px; margin-bottom: 28px;
    }
    .qa-btn {
      display: flex; align-items: center; gap: 12px;
      background: var(--white); border: none;
      border-radius: 14px; padding: 16px;
      font-family: 'DM Sans', sans-serif;
      font-size: 13px; font-weight: 600;
      color: var(--gray-700); text-decoration: none;
      box-shadow: 0 1px 3px rgba(0,0,0,0.04), 0 4px 16px rgba(0,0,0,0.04);
      transition: all .2s; cursor: pointer;
    }
    .qa-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 24px rgba(0,0,0,0.08); }
    .qa-icon {
      width: 36px; height: 36px; border-radius: 10px;
      display: flex; align-items: center; justify-content: center; flex-shrink: 0;
    }
    .qa-icon.orange { background: var(--orange-light); color: var(--orange); }
    .qa-icon.blue   { background: var(--blue-light);   color: var(--blue); }
    .qa-icon.green  { background: var(--green-light);  color: var(--green); }
    .qa-icon.purple { background: var(--purple-light); color: var(--purple); }

    .section-title {
      font-family: 'Syne', sans-serif;
      font-size: 16px; font-weight: 700;
      color: var(--gray-800); margin-bottom: 16px;
      display: flex; align-items: center; gap: 8px;
    }
    .empty-state {
      background: var(--white); border-radius: 16px;
      padding: 48px 24px; text-align: center;
      box-shadow: 0 1px 3px rgba(0,0,0,0.04), 0 4px 16px rgba(0,0,0,0.04);
    }
    .empty-icon {
      width: 64px; height: 64px;
      background: var(--orange-light); border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      margin: 0 auto 16px; color: var(--orange);
    }
    .empty-state h3 {
      font-family: 'Syne', sans-serif;
      font-size: 17px; font-weight: 700;
      color: var(--gray-700); margin-bottom: 6px;
    }
    .empty-state p { font-size: 13px; color: var(--gray-400); margin-bottom: 20px; }
    .btn-primary {
      display: inline-flex; align-items: center; gap: 8px;
      background: var(--orange); color: white;
      font-family: 'DM Sans', sans-serif;
      font-size: 13px; font-weight: 700;
      padding: 10px 20px; border-radius: 10px;
      border: none; cursor: pointer; text-decoration: none;
      box-shadow: 0 4px 12px rgba(249,115,22,0.3);
      transition: all .2s;
    }
    .btn-primary:hover { background: var(--orange-dark); transform: translateY(-1px); }

    .skeleton {
      background: linear-gradient(90deg, var(--gray-100) 25%, var(--gray-200) 50%, var(--gray-100) 75%);
      background-size: 200% 100%;
      animation: shimmer 1.4s infinite;
      border-radius: 8px;
    }
    @keyframes shimmer {
      from { background-position: 200% 0; }
      to   { background-position: -200% 0; }
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       TABLETTE (â‰¤ 1100px)
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    @media (max-width: 1100px) {
      .stats-grid { grid-template-columns: repeat(2, 1fr); }
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       MOBILE (â‰¤ 768px)
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    @media (max-width: 768px) {
      body { flex-direction: column; }

      /* Topbar apparaÃ®t */
      .topbar { display: flex; }

      /* Sidebar â†’ drawer latÃ©ral */
      .sidebar {
        position: fixed;
        top: 0; left: 0; bottom: 0;
        height: 100dvh;
        width: 280px;
        transform: translateX(-100%);
        z-index: 30;
        box-shadow: 4px 0 32px rgba(0,0,0,0.25);
      }
      .sidebar.open { transform: translateX(0); }
      .sidebar-close-btn { display: flex; }

      /* Overlay actif */
      .sidebar-overlay { display: block; }

      /* Main padding rÃ©duit */
      .main { padding: 20px 16px; }

      /* Header */
      .page-header { flex-direction: column; gap: 10px; align-items: flex-start; margin-bottom: 20px; }
      .page-title  { font-size: 22px; }
      .header-badge { align-self: flex-start; }

      /* Stats : cartes horizontales empilÃ©es */
      .stats-grid {
        grid-template-columns: 1fr;
        gap: 10px; margin-bottom: 20px;
      }
      .stat-card {
        padding: 16px 18px;
        flex-direction: row;
        align-items: center;
        gap: 14px;
      }
      .stat-header { flex: 1; align-items: flex-start; }
      .stat-value  { font-size: 26px; }
      .stat-footer { display: none; }

      /* Grille actions rapides visible */
      .quick-actions { display: grid; }

      .empty-state { padding: 32px 16px; }
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       TRÃˆS PETIT (â‰¤ 380px)
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    @media (max-width: 380px) {
      .quick-actions  { grid-template-columns: 1fr; }
      .topbar-brand span { display: none; }
    }
  </style>
</head>

<body>

  <!-- â•â• TOPBAR MOBILE â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <header class="topbar" id="topbar">
    <div class="topbar-brand">
      <div class="topbar-brand-icon">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5">
          <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/>
          <polyline points="14 2 14 8 20 8"/>
        </svg>
      </div>
      <span>Devis App</span>
    </div>
    <div class="topbar-right">
      <div class="topbar-avatar" id="topbarAvatar">?</div>
      <button class="hamburger" id="hamburger" aria-label="Ouvrir le menu" aria-expanded="false">
        <div class="ham-lines">
          <span></span><span></span><span></span>
        </div>
      </button>
    </div>
  </header>

  <!-- â•â• OVERLAY â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="sidebar-overlay" id="sidebarOverlay"></div>

  <!-- â•â• SIDEBAR â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <aside class="sidebar" id="sidebar">
    <div class="sidebar-logo">
      <div class="sidebar-logo-icon">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5">
          <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/>
          <polyline points="14 2 14 8 20 8"/>
        </svg>
      </div>
      <span>Devis App</span>
      <button class="sidebar-close-btn" id="sidebarCloseBtn" aria-label="Fermer">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
          <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
        </svg>
      </button>
    </div>

    <nav class="sidebar-nav">
      <span class="nav-section-label">Menu</span>
      <a href="dashboard.html" class="nav-link active">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/>
          <rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/>
        </svg>
        Dashboard
      </a>
      <a href="quotes.html" class="nav-link">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/>
          <polyline points="14 2 14 8 20 8"/>
          <line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/>
        </svg>
        Devis crÃ©Ã©s
      </a>
      <a href="create-quote.html" class="nav-link">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/>
        </svg>
        Nouveau devis
      </a>
      <a href="clients.html" class="nav-link">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/>
          <circle cx="9" cy="7" r="4"/>
          <path d="M23 21v-2a4 4 0 00-3-3.87"/><path d="M16 3.13a4 4 0 010 7.75"/>
        </svg>
        Clients
      </a>

      <span class="nav-section-label" style="margin-top:8px;">Compte</span>
      <a href="settings.html" class="nav-link">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="3"/>
          <path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-4 0v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83-2.83l.06-.06A1.65 1.65 0 004.68 15a1.65 1.65 0 00-1.51-1H3a2 2 0 010-4h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 012.83-2.83l.06.06A1.65 1.65 0 009 4.68a1.65 1.65 0 001-1.51V3a2 2 0 014 0v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 2.83l-.06.06A1.65 1.65 0 0019.4 9a1.65 1.65 0 001.51 1H21a2 2 0 010 4h-.09a1.65 1.65 0 00-1.51 1z"/>
        </svg>
        ParamÃ¨tres
      </a>
    </nav>

    <div class="sidebar-footer">
      <div class="user-card">
        <div class="user-avatar" id="userAvatar">?</div>
        <div class="user-info">
          <div class="user-name" id="sidebarName">Chargement...</div>
          <div class="user-role" id="sidebarCompany">â€”</div>
        </div>
      </div>
      <button class="btn-logout" id="logoutBtn">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"/>
          <polyline points="16 17 21 12 16 7"/>
          <line x1="21" y1="12" x2="9" y2="12"/>
        </svg>
        DÃ©connexion
      </button>
    </div>
  </aside>

  <!-- â•â• MAIN â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <main class="main">

    <div class="page-header">
      <div>
        <p class="page-subtitle" style="margin-bottom:6px;">
          Bonjour, <strong id="userName">...</strong> ğŸ‘‹
        </p>
        <h1 class="page-title">Tableau de bord</h1>
        <p class="page-subtitle" id="companyName" style="margin-top:4px;">â€”</p>
      </div>
      <div class="header-badge">
        <svg width="10" height="10" viewBox="0 0 24 24" fill="currentColor"><circle cx="12" cy="12" r="6"/></svg>
        ConnectÃ©
      </div>
    </div>

    <!-- Stats -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-header">
          <span class="stat-label">Total Devis</span>
          <div class="stat-icon orange">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/>
              <polyline points="14 2 14 8 20 8"/>
            </svg>
          </div>
        </div>
        <div class="stat-value" id="totalQuotes">
          <span class="skeleton" style="display:inline-block;width:48px;height:36px;"></span>
        </div>
        <div class="stat-footer">Devis crÃ©Ã©s sur votre compte</div>
      </div>
      <div class="stat-card">
        <div class="stat-header">
          <span class="stat-label">Clients</span>
          <div class="stat-icon blue">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/>
              <circle cx="9" cy="7" r="4"/>
            </svg>
          </div>
        </div>
        <div class="stat-value" id="totalClients">
          <span class="skeleton" style="display:inline-block;width:48px;height:36px;"></span>
        </div>
        <div class="stat-footer">Clients enregistrÃ©s</div>
      </div>
      <div class="stat-card">
        <div class="stat-header">
          <span class="stat-label">Chiffre d'affaires</span>
          <div class="stat-icon green">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="12" y1="1" x2="12" y2="23"/>
              <path d="M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6"/>
            </svg>
          </div>
        </div>
        <div class="stat-value" id="totalRevenue">
          <span class="skeleton" style="display:inline-block;width:80px;height:36px;"></span>
        </div>
        <div class="stat-footer">Devis acceptÃ©s uniquement</div>
      </div>
    </div>

    <!-- Actions rapides (mobile uniquement) -->
    <div class="quick-actions">
      <a href="create-quote.html" class="qa-btn">
        <div class="qa-icon orange">
          <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
            <line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/>
          </svg>
        </div>
        <span>Nouveau devis</span>
      </a>
      <a href="quotes.html" class="qa-btn">
        <div class="qa-icon blue">
          <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/>
            <polyline points="14 2 14 8 20 8"/>
          </svg>
        </div>
        <span>Mes devis</span>
      </a>
      <a href="clients.html" class="qa-btn">
        <div class="qa-icon green">
          <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/>
            <circle cx="9" cy="7" r="4"/>
          </svg>
        </div>
        <span>Clients</span>
      </a>
      <a href="settings.html" class="qa-btn">
        <div class="qa-icon purple">
          <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3"/>
            <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2"/>
          </svg>
        </div>
        <span>ParamÃ¨tres</span>
      </a>
    </div>

    <!-- Devis rÃ©cents -->
    <div class="section-title">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="var(--orange)" stroke-width="2.5">
        <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/>
        <polyline points="14 2 14 8 20 8"/>
      </svg>
      Devis rÃ©cents
    </div>
    <div class="empty-state" id="recentQuotes">
      <div class="empty-icon">
        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/>
          <polyline points="14 2 14 8 20 8"/>
          <line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/>
        </svg>
      </div>
      <h3>Aucun devis pour l'instant</h3>
      <p>CrÃ©ez votre premier devis pour commencer Ã  suivre votre activitÃ©.</p>
      <a href="create-quote.html" class="btn-primary">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
          <line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/>
        </svg>
        CrÃ©er un devis
      </a>
    </div>

  </main>

<script type="module">
import { createClient } from 'https://esm.sh/@supabase/supabase-js'

const supabase = createClient(
  'https://xeezdzbotsblzclnmnxg.supabase.co',
  'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhlZXpkemJvdHNibHpjbG5tbnhnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA0NDk3NTQsImV4cCI6MjA4NjAyNTc1NH0.RHIGavm6M9WCR6nve1Iz_JKFeQRlpRCU2FNAr9E02PM'
)

/* â”€â”€ Menu mobile â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const sidebar   = document.getElementById('sidebar')
const overlay   = document.getElementById('sidebarOverlay')
const hamburger = document.getElementById('hamburger')
const closeBtn  = document.getElementById('sidebarCloseBtn')

function openMenu() {
  sidebar.classList.add('open')
  overlay.classList.add('active')
  hamburger.classList.add('open')
  hamburger.setAttribute('aria-expanded', 'true')
  document.body.style.overflow = 'hidden'
}
function closeMenu() {
  sidebar.classList.remove('open')
  overlay.classList.remove('active')
  hamburger.classList.remove('open')
  hamburger.setAttribute('aria-expanded', 'false')
  document.body.style.overflow = ''
}

hamburger.addEventListener('click', () =>
  sidebar.classList.contains('open') ? closeMenu() : openMenu()
)
closeBtn.addEventListener('click', closeMenu)
overlay.addEventListener('click', closeMenu)

// Ferme en cliquant sur un lien (mobile)
sidebar.querySelectorAll('.nav-link').forEach(link =>
  link.addEventListener('click', () => { if (window.innerWidth <= 768) closeMenu() })
)

// Ferme en passant en mode desktop
window.addEventListener('resize', () => { if (window.innerWidth > 768) closeMenu() })

// Touche Echap
document.addEventListener('keydown', e => { if (e.key === 'Escape') closeMenu() })

/* â”€â”€ Auth â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
async function checkUser() {
  const { data: { session } } = await supabase.auth.getSession()
  if (!session) { window.location.href = 'login.html'; return }
  await loadUserProfile(session.user.id)
  await loadStats(session.user.id)
}

async function loadUserProfile(userId) {
  const { data, error } = await supabase
    .from('profiles').select('first_name, last_name, company').eq('id', userId).single()
  if (!error && data) {
    const fullName = [data.first_name, data.last_name].filter(Boolean).join(' ') || 'Utilisateur'
    const initials = [data.first_name?.[0], data.last_name?.[0]].filter(Boolean).join('').toUpperCase() || 'U'
    document.getElementById('userName').textContent       = data.first_name || 'Utilisateur'
    document.getElementById('sidebarName').textContent    = fullName
    document.getElementById('sidebarCompany').textContent = data.company || 'Mon entreprise'
    document.getElementById('companyName').textContent    = data.company || ''
    document.getElementById('userAvatar').textContent     = initials
    document.getElementById('topbarAvatar').textContent   = initials
  }
}

async function loadStats(userId) {
  const { count: quotesCount } = await supabase
    .from('quotes').select('*', { count: 'exact', head: true }).eq('user_id', userId)
  document.getElementById('totalQuotes').textContent = quotesCount ?? 0

  const { count: clientsCount } = await supabase
    .from('clients').select('*', { count: 'exact', head: true }).eq('user_id', userId)
  document.getElementById('totalClients').textContent = clientsCount ?? 0

  const { data: revenueData } = await supabase
    .from('quotes').select('total_amount').eq('user_id', userId).eq('status', 'accepted')
  let total = 0
  revenueData?.forEach(q => total += (q.total_amount || 0))
  document.getElementById('totalRevenue').textContent =
    new Intl.NumberFormat('fr-FR', { style: 'currency', currency: 'XOF' }).format(total)
}

document.getElementById('logoutBtn').addEventListener('click', async () => {
  await supabase.auth.signOut()
  window.location.href = 'login.html'
})

checkUser()
</script>

</body>
</html>