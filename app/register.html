<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
<title>Inscription â€” Devis App</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --orange: #F97316;
    --orange-dark: #EA6C0A;
    --orange-light: #FEF3E7;
    --orange-glow: rgba(249,115,22,0.15);
    --gray-50: #F9FAFB;
    --gray-100: #F3F4F6;
    --gray-200: #E5E7EB;
    --gray-300: #D1D5DB;
    --gray-400: #9CA3AF;
    --gray-500: #6B7280;
    --gray-600: #4B5563;
    --gray-700: #374151;
    --gray-800: #1F2937;
    --gray-900: #111827;
    --green: #10B981;
    --green-light: #D1FAE5;
    --red: #EF4444;
    --white: #FFFFFF;
  }

  html { height: 100%; }

  body {
    font-family: 'DM Sans', sans-serif;
    min-height: 100vh;
    min-height: 100dvh;
    display: grid;
    grid-template-columns: 1fr 1fr;
    -webkit-font-smoothing: antialiased;
    overflow: hidden;
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     LEFT PANEL
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .panel-left {
    background: var(--gray-900);
    position: relative;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    padding: 40px 48px;
  }

  .panel-left::before {
    content: '';
    position: absolute; inset: 0;
    background:
      radial-gradient(ellipse 600px 500px at 10% 10%, rgba(249,115,22,0.16) 0%, transparent 60%),
      radial-gradient(ellipse 400px 400px at 90% 90%, rgba(249,115,22,0.1) 0%, transparent 55%),
      radial-gradient(ellipse 300px 280px at 70% 20%, rgba(249,115,22,0.05) 0%, transparent 50%);
    pointer-events: none;
    animation: meshShift 10s ease-in-out infinite alternate;
  }
  @keyframes meshShift {
    from { transform: scale(1) rotate(0deg); }
    to   { transform: scale(1.05) rotate(1deg); }
  }
  .panel-left::after {
    content: '';
    position: absolute; inset: 0;
    background-image:
      linear-gradient(rgba(255,255,255,0.025) 1px, transparent 1px),
      linear-gradient(90deg, rgba(255,255,255,0.025) 1px, transparent 1px);
    background-size: 52px 52px;
    pointer-events: none;
  }

  .panel-logo {
    position: relative; z-index: 1;
    display: flex; align-items: center; gap: 10px;
    text-decoration: none;
  }
  .panel-logo-icon {
    width: 38px; height: 38px; background: var(--orange);
    border-radius: 11px;
    display: flex; align-items: center; justify-content: center;
    box-shadow: 0 0 0 3px rgba(249,115,22,0.25), 0 4px 14px rgba(249,115,22,0.35);
  }
  .panel-logo-text {
    font-family: 'Syne', sans-serif;
    font-size: 20px; font-weight: 800;
    color: white; letter-spacing: -.03em;
  }
  .panel-logo-text em { color: var(--orange); font-style: normal; }

  .panel-content { position: relative; z-index: 1; }

  .panel-tag {
    display: inline-flex; align-items: center; gap: 7px;
    background: rgba(249,115,22,0.12); border: 1px solid rgba(249,115,22,0.22);
    color: var(--orange); font-size: 11px; font-weight: 700;
    letter-spacing: .07em; text-transform: uppercase;
    padding: 5px 13px; border-radius: 100px; margin-bottom: 22px;
  }

  .panel-headline {
    font-family: 'Syne', sans-serif;
    font-size: clamp(24px, 2.8vw, 38px);
    font-weight: 800; color: white;
    line-height: 1.1; letter-spacing: -.04em; margin-bottom: 18px;
  }
  .panel-headline em { color: var(--orange); font-style: normal; }

  .panel-desc {
    font-size: 14px; color: rgba(255,255,255,0.42);
    line-height: 1.75; max-width: 320px; margin-bottom: 30px;
  }

  /* Steps preview */
  .steps-preview { display: flex; flex-direction: column; gap: 12px; }
  .step-preview-item {
    display: flex; align-items: center; gap: 13px;
    background: rgba(255,255,255,0.04);
    border: 1px solid rgba(255,255,255,0.06);
    border-radius: 12px; padding: 12px 15px;
    transition: background .2s;
  }
  .step-preview-item:hover { background: rgba(255,255,255,0.07); }
  .step-preview-num {
    width: 28px; height: 28px; border-radius: 8px;
    background: rgba(249,115,22,0.12);
    border: 1px solid rgba(249,115,22,0.2);
    display: flex; align-items: center; justify-content: center;
    font-family: 'Syne', sans-serif; font-size: 12px; font-weight: 800;
    color: var(--orange); flex-shrink: 0;
  }
  .step-preview-title {
    font-size: 13px; font-weight: 700;
    color: rgba(255,255,255,0.75); margin-bottom: 2px;
  }
  .step-preview-desc {
    font-size: 11.5px; color: rgba(255,255,255,0.3);
  }

  .panel-footer {
    position: relative; z-index: 1;
    display: flex; align-items: center; gap: 12px;
    padding-top: 22px;
    border-top: 1px solid rgba(255,255,255,0.07);
  }
  .panel-avatars { display: flex; }
  .panel-avatars span {
    width: 28px; height: 28px; border-radius: 50%;
    border: 2px solid var(--gray-900);
    background: var(--orange-light);
    display: flex; align-items: center; justify-content: center;
    font-size: 9px; font-weight: 700; color: var(--orange);
    margin-left: -7px;
  }
  .panel-avatars span:first-child { margin-left: 0; }
  .panel-footer-text { font-size: 12px; color: rgba(255,255,255,0.3); }
  .panel-footer-text strong { color: rgba(255,255,255,0.65); }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     RIGHT PANEL
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .panel-right {
    background: var(--white);
    display: flex; align-items: flex-start; justify-content: center;
    padding: 40px 36px;
    overflow-y: auto;
    position: relative;
  }
  .panel-right::before {
    content: '';
    position: absolute; inset: 0;
    background: radial-gradient(ellipse 500px 400px at 100% 0%, rgba(249,115,22,0.03) 0%, transparent 60%);
    pointer-events: none;
  }

  .form-wrap {
    width: 100%; max-width: 460px;
    position: relative; z-index: 1;
    padding: 8px 0 32px;
    animation: fadeUp .45s cubic-bezier(.4,0,.2,1) both;
  }
  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(18px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  /* Mobile logo */
  .mobile-logo {
    display: none;
    align-items: center; gap: 9px;
    text-decoration: none; margin-bottom: 24px;
  }
  .mobile-logo-icon {
    width: 34px; height: 34px; background: var(--orange); border-radius: 10px;
    display: flex; align-items: center; justify-content: center;
    box-shadow: 0 4px 12px rgba(249,115,22,0.32);
  }
  .mobile-logo-text {
    font-family: 'Syne', sans-serif; font-size: 18px; font-weight: 800;
    color: var(--gray-900); letter-spacing: -.03em;
  }
  .mobile-logo-text em { color: var(--orange); font-style: normal; }

  .form-header { margin-bottom: 26px; }
  .form-badge {
    display: inline-flex; align-items: center; gap: 6px;
    background: var(--orange-light); color: var(--orange);
    font-family: 'Syne', sans-serif;
    font-size: 10.5px; font-weight: 700;
    letter-spacing: .08em; text-transform: uppercase;
    padding: 5px 12px; border-radius: 100px; margin-bottom: 16px;
    border: 1px solid rgba(249,115,22,0.18);
  }
  .form-title {
    font-family: 'Syne', sans-serif;
    font-size: 24px; font-weight: 800;
    color: var(--gray-900); letter-spacing: -.03em;
    line-height: 1.15; margin-bottom: 6px;
  }
  .form-subtitle { font-size: 13.5px; color: var(--gray-400); line-height: 1.6; }

  /* â”€â”€â”€ Stepper â”€â”€â”€ */
  .stepper {
    display: flex; align-items: flex-start;
    gap: 0; margin-bottom: 28px;
  }
  .step-item {
    display: flex; flex-direction: column; align-items: center;
    gap: 6px; flex: 1; position: relative;
  }
  .step-item:not(:last-child)::after {
    content: '';
    position: absolute; top: 15px;
    left: calc(50% + 17px); right: calc(-50% + 17px);
    height: 1.5px;
    background: var(--gray-200);
    transition: background .4s ease;
    z-index: 0;
  }
  .step-item.done:not(:last-child)::after { background: var(--orange); }
  .step-dot {
    width: 30px; height: 30px; border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    font-family: 'Syne', sans-serif; font-size: 12px; font-weight: 800;
    border: 2px solid var(--gray-200);
    background: var(--white); color: var(--gray-400);
    transition: all .3s ease;
    position: relative; z-index: 1;
  }
  .step-item.active .step-dot {
    border-color: var(--orange); background: var(--orange); color: white;
    box-shadow: 0 0 0 4px rgba(249,115,22,0.13);
  }
  .step-item.done .step-dot {
    border-color: var(--green); background: var(--green-light); color: var(--green);
  }
  .step-label {
    font-size: 10px; font-weight: 600; color: var(--gray-400);
    text-align: center; letter-spacing: .03em;
    transition: color .3s;
  }
  .step-item.active .step-label { color: var(--orange); font-weight: 700; }
  .step-item.done  .step-label  { color: var(--green); }

  /* â”€â”€â”€ Step content â”€â”€â”€ */
  .step { display: none; animation: stepIn .28s ease both; }
  .step.active { display: block; }
  @keyframes stepIn {
    from { opacity: 0; transform: translateX(12px); }
    to   { opacity: 1; transform: translateX(0); }
  }

  .step-section-title {
    font-size: 11px; font-weight: 700;
    letter-spacing: .09em; text-transform: uppercase;
    color: var(--orange); margin-bottom: 16px;
    display: flex; align-items: center; gap: 6px;
  }
  .step-section-title::after {
    content: ''; flex: 1; height: 1px; background: var(--gray-100);
  }

  /* â”€â”€â”€ Grid â”€â”€â”€ */
  .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
  .col-2  { grid-column: span 2; }

  /* â”€â”€â”€ Fields â”€â”€â”€ */
  .field-group {
    display: flex; flex-direction: column; gap: 5px;
    margin-bottom: 0;
  }
  .field-group label {
    font-size: 12px; font-weight: 700;
    color: var(--gray-600); letter-spacing: .03em;
    display: flex; align-items: center; gap: 4px;
  }
  .field-group label .req { color: var(--orange); font-size: 11px; }
  .field-group label .opt { color: var(--gray-300); font-size: 10px; font-weight: 500; }

  .input-wrap { position: relative; }
  .input-icon {
    position: absolute; left: 12px; top: 50%; transform: translateY(-50%);
    color: var(--gray-400); pointer-events: none;
    display: flex; align-items: center; transition: color .2s;
  }
  .input-wrap:focus-within .input-icon { color: var(--orange); }

  input[type="text"],
  input[type="email"],
  input[type="tel"],
  input[type="password"] {
    width: 100%;
    border: 1.5px solid var(--gray-200);
    border-radius: 10px;
    padding: 11px 13px 11px 39px;
    font-family: 'DM Sans', sans-serif;
    font-size: 14px; color: var(--gray-800);
    background: var(--gray-50);
    transition: border-color .2s, box-shadow .2s, background .2s;
    outline: none;
    appearance: none;
    -webkit-appearance: none;
  }
  input::placeholder { color: var(--gray-300); }
  input:focus {
    border-color: var(--orange); background: var(--white);
    box-shadow: 0 0 0 3px rgba(249,115,22,0.1);
  }
  input.error-f {
    border-color: var(--red);
    box-shadow: 0 0 0 3px rgba(239,68,68,0.09);
  }
  input.valid-f {
    border-color: var(--green);
  }

  /* Toggle password */
  .toggle-pw {
    position: absolute; right: 11px; top: 50%; transform: translateY(-50%);
    background: none; border: none; cursor: pointer;
    color: var(--gray-400); padding: 4px; border-radius: 6px;
    display: flex; align-items: center; transition: all .18s;
  }
  .toggle-pw:hover { color: var(--gray-600); background: var(--gray-100); }

  /* Password strength */
  .strength-wrap {
    height: 3px; border-radius: 2px;
    background: var(--gray-100); margin-top: 6px; overflow: hidden;
  }
  .strength-fill {
    height: 100%; border-radius: 2px;
    transition: width .35s ease, background .35s ease; width: 0%;
  }
  .strength-text { font-size: 11px; color: var(--gray-400); margin-top: 4px; min-height: 15px; }

  /* Hint */
  .field-hint {
    font-size: 11px; color: var(--gray-400); line-height: 1.55;
    padding: 9px 12px;
    background: var(--gray-50); border-radius: 9px;
    border: 1px solid var(--gray-100);
  }

  /* â”€â”€â”€ Buttons â”€â”€â”€ */
  .btn-row {
    display: flex; justify-content: space-between; align-items: center;
    gap: 10px; margin-top: 24px;
  }
  .btn {
    font-family: 'DM Sans', sans-serif;
    font-size: 14px; font-weight: 700;
    border: none; cursor: pointer;
    border-radius: 10px; padding: 11px 22px;
    transition: all .2s;
    display: inline-flex; align-items: center; gap: 7px;
    letter-spacing: -.01em;
  }
  .btn-back {
    background: var(--gray-100); color: var(--gray-600);
    border: 1.5px solid var(--gray-200);
  }
  .btn-back:hover { background: var(--gray-200); }
  .btn-next {
    background: var(--orange); color: white;
    margin-left: auto;
    box-shadow: 0 4px 14px rgba(249,115,22,0.3);
  }
  .btn-next:hover { background: var(--orange-dark); transform: translateY(-1px); box-shadow: 0 7px 20px rgba(249,115,22,0.36); }
  .btn-next:active { transform: translateY(0); }
  .btn-submit {
    background: var(--green); color: white;
    margin-left: auto;
    box-shadow: 0 4px 14px rgba(16,185,129,0.3);
  }
  .btn-submit:hover:not(:disabled) { filter: brightness(1.06); transform: translateY(-1px); box-shadow: 0 7px 20px rgba(16,185,129,0.35); }
  .btn-submit:active:not(:disabled) { transform: translateY(0); }
  .btn-submit:disabled { opacity: .6; cursor: not-allowed; transform: none; }
  .hidden { display: none !important; }

  /* â”€â”€â”€ Message â”€â”€â”€ */
  #message {
    font-size: 13px; text-align: center;
    border-radius: 9px; line-height: 1.5;
    max-height: 0; overflow: hidden; padding: 0;
    transition: max-height .3s ease, padding .3s ease, margin .3s ease;
  }
  #message.show { max-height: 80px; padding: 10px 14px; margin-top: 10px; }
  #message.success { color: var(--green); background: #F0FDF4; border: 1px solid rgba(16,185,129,0.15); }
  #message.error   { color: var(--red);   background: #FFF1F1; border: 1px solid rgba(239,68,68,0.12); }

  /* â”€â”€â”€ Success screen â”€â”€â”€ */
  .success-screen {
    display: none; flex-direction: column;
    align-items: center; text-align: center;
    padding: 20px 0 8px;
    animation: fadeUp .4s ease;
  }
  .success-screen.show { display: flex; }
  .success-anim {
    width: 76px; height: 76px; border-radius: 50%;
    background: var(--green-light);
    display: flex; align-items: center; justify-content: center;
    margin-bottom: 22px;
    box-shadow: 0 0 0 8px rgba(16,185,129,0.1);
  }
  .success-screen h2 {
    font-family: 'Syne', sans-serif;
    font-size: 22px; font-weight: 800; color: var(--gray-900);
    letter-spacing: -.03em; margin-bottom: 10px;
  }
  .success-screen p { font-size: 14px; color: var(--gray-500); line-height: 1.65; max-width: 320px; }
  .email-badge {
    display: inline-block;
    background: var(--orange-light); color: var(--orange);
    font-weight: 700; font-size: 13px;
    padding: 4px 12px; border-radius: 8px; margin: 10px 0 4px;
    border: 1px solid rgba(249,115,22,0.18);
  }
  .btn-goto-login {
    margin-top: 24px;
    display: inline-flex; align-items: center; gap: 8px;
    background: var(--orange); color: white;
    font-family: 'DM Sans', sans-serif; font-weight: 700; font-size: 14px;
    padding: 12px 28px; border-radius: 11px; text-decoration: none;
    box-shadow: 0 4px 14px rgba(249,115,22,0.32);
    transition: all .2s;
  }
  .btn-goto-login:hover { background: var(--orange-dark); transform: translateY(-1px); }

  /* â”€â”€â”€ Footer â”€â”€â”€ */
  .form-footer {
    text-align: center;
    font-size: 13.5px; color: var(--gray-400); margin-top: 20px;
  }
  .form-footer a {
    color: var(--orange); font-weight: 700;
    text-decoration: none; transition: color .18s;
  }
  .form-footer a:hover { color: var(--orange-dark); }

  /* â”€â”€â”€ Spinner â”€â”€â”€ */
  @keyframes spin { to { transform: rotate(360deg); } }
  .spinner {
    width: 15px; height: 15px;
    border: 2px solid rgba(255,255,255,0.35);
    border-top-color: white; border-radius: 50%;
    animation: spin .65s linear infinite; flex-shrink: 0;
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     RESPONSIVE
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  @media (max-width: 1024px) {
    .panel-left { padding: 32px; }
    .panel-headline { font-size: 26px; }
    .panel-right { padding: 36px 24px; }
  }

  @media (max-width: 768px) {
    body {
      grid-template-columns: 1fr;
      overflow-y: auto; overflow-x: hidden;
      background: var(--gray-50);
    }
    .panel-left { display: none; }
    .panel-right {
      min-height: 100dvh; padding: 40px 20px 48px;
      background: var(--gray-50);
      align-items: flex-start;
    }
    .panel-right::after {
      content: '';
      position: fixed; top: 0; left: 0; right: 0;
      height: 3px;
      background: linear-gradient(90deg, var(--orange), var(--orange-dark));
    }
    .form-wrap { max-width: 100%; }
    .mobile-logo { display: flex; }
    .form-header { margin-bottom: 22px; }
    .grid-2 { grid-template-columns: 1fr; }
    .col-2  { grid-column: span 1; }
  }

  @media (max-width: 480px) {
    .panel-right { padding: 32px 14px 40px; }
    .form-title  { font-size: 21px; }
    .stepper     { gap: 0; }
    .step-label  { font-size: 9px; }
  }

  @media (max-width: 360px) {
    .panel-right { padding: 24px 10px 36px; }
    .form-title  { font-size: 19px; }
    input        { font-size: 13px; }
    .btn         { padding: 10px 16px; font-size: 13px; }
  }
</style>
</head>

<body>

<!-- â•â•â•â•â•â•â•â• LEFT PANEL â•â•â•â•â•â•â•â• -->
<div class="panel-left">
  <a href="../index.html" class="panel-logo">
    <div class="panel-logo-icon">
      <svg width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5">
        <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/>
        <polyline points="14 2 14 8 20 8"/>
      </svg>
    </div>
    <span class="panel-logo-text">Devis<em>App</em></span>
  </a>

  <div class="panel-content">
    <div class="panel-tag">
      <svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M22 11.08V12a10 10 0 11-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
      Gratuit pour commencer
    </div>
    <h2 class="panel-headline">Votre compte<br>en <em>3 Ã©tapes</em><br>simples.</h2>
    <p class="panel-desc">Configurez votre profil et commencez Ã  crÃ©er des devis professionnels en moins de 5 minutes.</p>

    <div class="steps-preview">
      <div class="step-preview-item">
        <div class="step-preview-num">1</div>
        <div class="step-preview-info">
          <div class="step-preview-title">Votre identitÃ©</div>
          <div class="step-preview-desc">PrÃ©nom, nom, email et tÃ©lÃ©phone</div>
        </div>
      </div>
      <div class="step-preview-item">
        <div class="step-preview-num">2</div>
        <div class="step-preview-info">
          <div class="step-preview-title">Votre entreprise</div>
          <div class="step-preview-desc">Nom, activitÃ© et adresse</div>
        </div>
      </div>
      <div class="step-preview-item">
        <div class="step-preview-num">3</div>
        <div class="step-preview-info">
          <div class="step-preview-title">SÃ©curitÃ©</div>
          <div class="step-preview-desc">Choisissez un mot de passe fort</div>
        </div>
      </div>
    </div>
  </div>

  <div class="panel-footer">
    <div class="panel-avatars">
      <span>KD</span><span>SM</span><span>AB</span><span>FL</span>
    </div>
    <p class="panel-footer-text">
      <strong>+2 400 entrepreneurs</strong> nous font confiance
    </p>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â• RIGHT PANEL â•â•â•â•â•â•â•â• -->
<div class="panel-right">
  <div class="form-wrap">

    <!-- Mobile logo -->
    <a href="../index.html" class="mobile-logo">
      <div class="mobile-logo-icon">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5">
          <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/>
          <polyline points="14 2 14 8 20 8"/>
        </svg>
      </div>
      <span class="mobile-logo-text">Devis<em>App</em></span>
    </a>

    <div class="form-header">
      <div class="form-badge">
        <svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
          <path d="M16 21v-2a4 4 0 00-4-4H6a4 4 0 00-4 4v2"/>
          <circle cx="9" cy="7" r="4"/>
          <line x1="19" y1="8" x2="19" y2="14"/><line x1="22" y1="11" x2="16" y2="11"/>
        </svg>
        Inscription gratuite
      </div>
      <h1 class="form-title">CrÃ©er votre compte </h1>
      <p class="form-subtitle">Sans carte bancaire. PrÃªt en moins de 5 minutes.</p>
    </div>

    <!-- Stepper -->
    <div class="stepper" id="stepperEl">
      <div class="step-item active" data-step="0">
        <div class="step-dot">1</div>
        <span class="step-label">IdentitÃ©</span>
      </div>
      <div class="step-item" data-step="1">
        <div class="step-dot">2</div>
        <span class="step-label">Entreprise</span>
      </div>
      <div class="step-item" data-step="2">
        <div class="step-dot">3</div>
        <span class="step-label">SÃ©curitÃ©</span>
      </div>
    </div>

    <!-- FORM -->
    <form id="registerForm" novalidate>

      <!-- STEP 1 : IdentitÃ© -->
      <div class="step active" data-index="0">
        <p class="step-section-title">Informations personnelles</p>
        <div class="grid-2">
          <div class="field-group">
            <label>PrÃ©nom <span class="req">*</span></label>
            <div class="input-wrap">
              <span class="input-icon">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
              </span>
              <input id="first_name" type="text" placeholder="Jean" required autocomplete="given-name">
            </div>
          </div>
          <div class="field-group">
            <label>Nom <span class="req">*</span></label>
            <div class="input-wrap">
              <span class="input-icon">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
              </span>
              <input id="last_name" type="text" placeholder="Dupont" required autocomplete="family-name">
            </div>
          </div>
          <div class="field-group col-2">
            <label>Email <span class="req">*</span></label>
            <div class="input-wrap">
              <span class="input-icon">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
              </span>
              <input id="email" type="email" placeholder="jean@entreprise.com" required autocomplete="email" inputmode="email">
            </div>
          </div>
          <div class="field-group col-2">
            <label>TÃ©lÃ©phone <span class="opt">(optionnel)</span></label>
            <div class="input-wrap">
              <span class="input-icon">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07A19.5 19.5 0 013.07 9.8 19.79 19.79 0 01.22 1.22 2 2 0 012.18 0h3a2 2 0 012 1.72c.127.96.361 1.903.7 2.81a2 2 0 01-.45 2.11L6.91 7.09A16 16 0 0016.92 17.1l.57-.57a2 2 0 012.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0124 18.92z"/></svg>
              </span>
              <input id="phone" type="tel" placeholder="+33 6 00 00 00 00" autocomplete="tel" inputmode="tel">
            </div>
          </div>
        </div>
      </div>

      <!-- STEP 2 : Entreprise -->
      <div class="step" data-index="1">
        <p class="step-section-title">Informations entreprise</p>
        <div class="grid-2">
          <div class="field-group col-2">
            <label>Nom de l'entreprise <span class="req">*</span></label>
            <div class="input-wrap">
              <span class="input-icon">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="7" width="20" height="14" rx="2"/><path d="M16 21V5a2 2 0 00-2-2h-4a2 2 0 00-2 2v16"/></svg>
              </span>
              <input id="company" type="text" placeholder="Dupont & AssociÃ©s" required autocomplete="organization">
            </div>
          </div>
          <div class="field-group col-2">
            <label>Domaine d'activitÃ© <span class="req">*</span></label>
            <div class="input-wrap">
              <span class="input-icon">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
              </span>
              <input id="activite" type="text" placeholder="ex: Ã‰lectricien, Designer, BTP..." required>
            </div>
          </div>
          <div class="field-group col-2">
            <label>Adresse <span class="opt">(optionnel)</span></label>
            <div class="input-wrap">
              <span class="input-icon">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/><circle cx="12" cy="10" r="3"/></svg>
              </span>
              <input id="address" type="text" placeholder="12 rue de la Paix" autocomplete="street-address">
            </div>
          </div>
          <div class="field-group">
            <label>Ville <span class="opt">(optionnel)</span></label>
            <div class="input-wrap">
              <span class="input-icon">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
              </span>
              <input id="city" type="text" placeholder="Paris" autocomplete="address-level2">
            </div>
          </div>
          <div class="field-group">
            <label>Pays <span class="opt">(optionnel)</span></label>
            <div class="input-wrap">
              <span class="input-icon">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 010 20M12 2a15.3 15.3 0 000 20"/></svg>
              </span>
              <input id="country" type="text" placeholder="France" autocomplete="country-name">
            </div>
          </div>
        </div>
      </div>

      <!-- STEP 3 : SÃ©curitÃ© -->
      <div class="step" data-index="2">
        <p class="step-section-title">SÃ©curitÃ© du compte</p>
        <div style="display:flex;flex-direction:column;gap:16px;">
          <div class="field-group">
            <label>Mot de passe <span class="req">*</span></label>
            <div class="input-wrap">
              <span class="input-icon">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0110 0v4"/></svg>
              </span>
              <input id="password" type="password" placeholder="Min. 8 caractÃ¨res" required autocomplete="new-password">
              <button type="button" class="toggle-pw" id="togglePw1" aria-label="Afficher">
                <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
              </button>
            </div>
            <div class="strength-wrap"><div class="strength-fill" id="strengthFill"></div></div>
            <span class="strength-text" id="strengthText"></span>
          </div>
          <div class="field-group">
            <label>Confirmer le mot de passe <span class="req">*</span></label>
            <div class="input-wrap">
              <span class="input-icon">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0110 0v4"/></svg>
              </span>
              <input id="confirm_password" type="password" placeholder="RÃ©pÃ©tez le mot de passe" required autocomplete="new-password">
              <button type="button" class="toggle-pw" id="togglePw2" aria-label="Afficher">
                <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
              </button>
            </div>
          </div>
          <p class="field-hint">
            Min. 8 caractÃ¨res Â· une majuscule Â· une minuscule Â· un chiffre Â· un caractÃ¨re spÃ©cial <code>(@$!%*?&)</code>
          </p>
        </div>
      </div>

      <!-- Message -->
      <p id="message"></p>

      <!-- Boutons -->
      <div class="btn-row">
        <button type="button" id="prevBtn" class="btn btn-back hidden">
          <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="15 18 9 12 15 6"/></svg>
          Retour
        </button>
        <button type="button" id="nextBtn" class="btn btn-next">
          Continuer
          <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="9 18 15 12 9 6"/></svg>
        </button>
        <button type="submit" id="submitBtn" class="btn btn-submit hidden">
          <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M20 6L9 17l-5-5"/></svg>
          CrÃ©er mon compte
        </button>
      </div>
    </form>

    <!-- SUCCESS SCREEN -->
    <div class="success-screen" id="successScreen">
      <div class="success-anim">
        <svg width="34" height="34" viewBox="0 0 24 24" fill="none" stroke="#10B981" stroke-width="2.5">
          <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
          <polyline points="22,6 12,13 2,6"/>
        </svg>
      </div>
      <h2>VÃ©rifiez votre email ğŸ“¬</h2>
      <p>Un lien d'activation a Ã©tÃ© envoyÃ© Ã </p>
      <span class="email-badge" id="confirmedEmail"></span>
      <p style="margin-top:12px;">Cliquez sur le lien pour activer votre compte, puis connectez-vous.</p>
      <a href="login.html" class="btn-goto-login">
        Aller Ã  la connexion
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="9 18 15 12 9 6"/></svg>
      </a>
    </div>

    <!-- Footer -->
    <p class="form-footer" id="loginLink">
      DÃ©jÃ  un compte ?
      <a href="login.html">Se connecter</a>
    </p>

  </div>
</div>

<script type="module">
import { createClient } from 'https://esm.sh/@supabase/supabase-js'

const supabase = createClient(
  'https://xeezdzbotsblzclnmnxg.supabase.co',
  'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhlZXpkemJvdHNibHpjbG5tbnhnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA0NDk3NTQsImV4cCI6MjA4NjAyNTc1NH0.RHIGavm6M9WCR6nve1Iz_JKFeQRlpRCU2FNAr9E02PM'
)

/* â”€â”€â”€ DOM â”€â”€â”€ */
const steps      = document.querySelectorAll('.step')
const stepItems  = document.querySelectorAll('.step-item')
const nextBtn    = document.getElementById('nextBtn')
const prevBtn    = document.getElementById('prevBtn')
const submitBtn  = document.getElementById('submitBtn')
const pwInput    = document.getElementById('password')
const cpwInput   = document.getElementById('confirm_password')
const msgEl      = document.getElementById('message')
const form       = document.getElementById('registerForm')
const successScr = document.getElementById('successScreen')
const stepperEl  = document.getElementById('stepperEl')
const loginLink  = document.getElementById('loginLink')
const fillEl     = document.getElementById('strengthFill')
const textEl     = document.getElementById('strengthText')

let currentStep = 0

/* â”€â”€â”€ Toggle passwords â”€â”€â”€ */
function makeToggle(btnId, inputId) {
  const btn = document.getElementById(btnId)
  const inp = document.getElementById(inputId)
  btn.addEventListener('click', () => {
    const show = inp.type === 'password'
    inp.type = show ? 'text' : 'password'
    btn.innerHTML = show
      ? `<svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17.94 17.94A10.07 10.07 0 0112 20c-7 0-11-8-11-8a18.45 18.45 0 015.06-5.94M9.9 4.24A9.12 9.12 0 0112 4c7 0 11 8 11 8a18.5 18.5 0 01-2.16 3.19m-6.72-1.07a3 3 0 11-4.24-4.24"/><line x1="1" y1="1" x2="23" y2="23"/></svg>`
      : `<svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>`
  })
}
makeToggle('togglePw1', 'password')
makeToggle('togglePw2', 'confirm_password')

/* â”€â”€â”€ Password strength â”€â”€â”€ */
pwInput.addEventListener('input', () => {
  const p = pwInput.value
  if (!p) { fillEl.style.width = '0%'; textEl.textContent = ''; return }
  let score = 0
  if (p.length >= 8)       score++
  if (/[A-Z]/.test(p))     score++
  if (/[a-z]/.test(p))     score++
  if (/\d/.test(p))        score++
  if (/[@$!%*?&]/.test(p)) score++

  const levels = [
    { w: '25%',  c: '#EF4444', l: 'TrÃ¨s faible' },
    { w: '50%',  c: '#F97316', l: 'Faible' },
    { w: '75%',  c: '#F59E0B', l: 'Moyen' },
    { w: '100%', c: '#10B981', l: 'Fort âœ“' },
  ]
  const idx = Math.max(0, Math.min(score - 1, 3))
  const lvl = score === 0 ? { w: '15%', c: '#EF4444', l: 'TrÃ¨s faible' } : levels[idx]
  fillEl.style.width      = lvl.w
  fillEl.style.background = lvl.c
  textEl.textContent      = lvl.l
  textEl.style.color      = lvl.c
})

/* â”€â”€â”€ Show step â”€â”€â”€ */
function showStep(n) {
  steps.forEach((s, i) => s.classList.toggle('active', i === n))
  stepItems.forEach((item, i) => {
    item.classList.toggle('active', i === n)
    item.classList.toggle('done', i < n)
    // Replace number with checkmark when done
    const dot = item.querySelector('.step-dot')
    dot.innerHTML = i < n
      ? `<svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M20 6L9 17l-5-5"/></svg>`
      : (i + 1)
  })
  prevBtn.classList.toggle('hidden', n === 0)
  nextBtn.classList.toggle('hidden', n === steps.length - 1)
  submitBtn.classList.toggle('hidden', n !== steps.length - 1)
  clearMessage()
}

/* â”€â”€â”€ Validation â”€â”€â”€ */
function validateStep() {
  const required = steps[currentStep].querySelectorAll('input[required]')
  let valid = true
  required.forEach(f => {
    f.classList.remove('error-f')
    if (!f.value.trim() || !f.checkValidity()) {
      f.classList.add('error-f'); valid = false
    }
  })
  if (currentStep === 0) {
    const em = document.getElementById('email')
    if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(em.value.trim())) {
      em.classList.add('error-f'); valid = false
    }
  }
  return valid
}

/* â”€â”€â”€ Navigation â”€â”€â”€ */
nextBtn.addEventListener('click', () => {
  if (!validateStep()) { showMessage('Veuillez remplir tous les champs obligatoires.'); return }
  currentStep++; showStep(currentStep)
  // Scroll to top on mobile
  window.scrollTo({ top: 0, behavior: 'smooth' })
})
prevBtn.addEventListener('click', () => { currentStep--; showStep(currentStep) })

/* â”€â”€â”€ Messages â”€â”€â”€ */
function showMessage(text, type = 'error') {
  msgEl.textContent = text; msgEl.className = `${type} show`
}
function clearMessage() { msgEl.textContent = ''; msgEl.className = '' }

/* â”€â”€â”€ Submit loading â”€â”€â”€ */
function setLoading(loading) {
  submitBtn.disabled = loading
  submitBtn.innerHTML = loading
    ? `<span class="spinner"></span> CrÃ©ation en cours...`
    : `<svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M20 6L9 17l-5-5"/></svg> CrÃ©er mon compte`
}

/* â”€â”€â”€ Validate password rules â”€â”€â”€ */
function validatePassword(pw) {
  if (pw.length < 8) return 'Le mot de passe doit contenir au moins 8 caractÃ¨res.'
  if (!/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])/.test(pw))
    return 'Requis : majuscule, minuscule, chiffre et caractÃ¨re spÃ©cial (@$!%*?&).'
  return null
}

/* â”€â”€â”€ Success screen â”€â”€â”€ */
function showSuccess(email) {
  form.style.display = 'none'
  stepperEl.style.display = 'none'
  loginLink.style.display = 'none'
  clearMessage()
  document.getElementById('confirmedEmail').textContent = email
  successScr.classList.add('show')
}

/* â”€â”€â”€ Form submit â”€â”€â”€ */
form.addEventListener('submit', async (e) => {
  e.preventDefault()
  clearMessage()

  const email    = document.getElementById('email').value.trim()
  const password = pwInput.value
  const confirm  = cpwInput.value

  const pwErr = validatePassword(password)
  if (pwErr) { showMessage(pwErr); return }
  if (password !== confirm) { showMessage('Les mots de passe ne correspondent pas.'); return }

  setLoading(true)

  const profileData = {
    first_name: document.getElementById('first_name').value.trim(),
    last_name:  document.getElementById('last_name').value.trim(),
    phone:      document.getElementById('phone').value.trim(),
    company:    document.getElementById('company').value.trim(),
    activite:   document.getElementById('activite').value.trim(),
    address:    document.getElementById('address').value.trim(),
    city:       document.getElementById('city').value.trim(),
    country:    document.getElementById('country').value.trim(),
  }

  const { data, error: authError } = await supabase.auth.signUp({
    email, password,
    options: { data: profileData }
  })

  if (authError) {
    let msg = authError.message
    if (/already registered|user already/i.test(msg)) {
      msg = 'Cet email est dÃ©jÃ  utilisÃ©. Connectez-vous ou rÃ©initialisez votre mot de passe.'
    }
    showMessage(msg)
    setLoading(false)
    return
  }

  if (!data.session) {
    try { localStorage.setItem('pending_profile', JSON.stringify({ ...profileData, id: data.user?.id })) } catch(_) {}
    showSuccess(email)
    setLoading(false)
    return
  }

  const { error: profileError } = await supabase.from('profiles').upsert({ id: data.user.id, ...profileData }, { onConflict: 'id' })
  if (profileError) { showMessage('Compte crÃ©Ã© mais erreur profil : ' + profileError.message); setLoading(false); return }

  showSuccess(email)
  setLoading(false)
})

showStep(0)
</script>

</body>
</html>